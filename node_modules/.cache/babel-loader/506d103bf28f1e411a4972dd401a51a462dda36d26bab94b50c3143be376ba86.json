{"ast":null,"code":"import React,{createContext,useState}from'react';import{jsx as _jsx}from\"react/jsx-runtime\";export const CarrinhoContext=/*#__PURE__*/createContext();export const CarrinhoProvider=_ref=>{let{children}=_ref;const[carrinho,setCarrinho]=useState(()=>{return JSON.parse(localStorage.getItem('carrinho'))||[];});const atualizarCarrinho=novoCarrinho=>{setCarrinho(novoCarrinho);localStorage.setItem('carrinho',JSON.stringify(novoCarrinho));};const adicionarAoCarrinho=produto=>{if(carrinho.some(item=>item.idproduto===produto.idproduto)){alert('Este produto já está no carrinho!');return;}atualizarCarrinho([...carrinho,produto]);};const removerDoCarrinho=idProduto=>{const novoCarrinho=carrinho.filter(produto=>produto.idproduto!==idProduto);atualizarCarrinho(novoCarrinho);};const produtoJaNoCarrinho=idProduto=>carrinho.some(produto=>produto.idproduto===idProduto);const finalizarCompra=()=>{if(carrinho.length===0)return alert(\"Seu carrinho está vazio.\");if(!carrinho.some(produto=>produto.nome&&produto.preco))return alert(\"Não há produtos válidos no carrinho.\");const frete=10.00;let subtotal=0;let mensagem=\"*Resumo do Seu Pedido:*\\n\\n\";carrinho.forEach((produto,index)=>{if(!produto.nome||produto.preco==null)return;const preco=Number(produto.preco||0).toFixed(2);mensagem+=`${index+1}.  *${produto.nome}* - R$${preco}\\n`;subtotal+=parseFloat(preco);});const total=subtotal+frete;mensagem+=`\\n*Subtotal:* R$${subtotal.toFixed(2)}\\n*Total:* R$${total.toFixed(2)}\\n\\nObrigado por comprar!\\nGostaria de algo mais personalizado?`;window.open(`https://wa.me/5511971195011?text=${encodeURIComponent(mensagem)}`,\"_blank\");};return/*#__PURE__*/_jsx(CarrinhoContext.Provider,{value:{carrinho,adicionarAoCarrinho,removerDoCarrinho,produtoJaNoCarrinho,finalizarCompra},children:children});};","map":{"version":3,"names":["React","createContext","useState","jsx","_jsx","CarrinhoContext","CarrinhoProvider","_ref","children","carrinho","setCarrinho","JSON","parse","localStorage","getItem","atualizarCarrinho","novoCarrinho","setItem","stringify","adicionarAoCarrinho","produto","some","item","idproduto","alert","removerDoCarrinho","idProduto","filter","produtoJaNoCarrinho","finalizarCompra","length","nome","preco","frete","subtotal","mensagem","forEach","index","Number","toFixed","parseFloat","total","window","open","encodeURIComponent","Provider","value"],"sources":["E:/Faculdade/REACT-Fran_Artesanato-Frontend/fram-artesanato/frontend/src/context/CarrinhoContext.js"],"sourcesContent":["import React, { createContext, useState } from 'react';\r\n\r\nexport const CarrinhoContext = createContext();\r\n\r\nexport const CarrinhoProvider = ({ children }) => {\r\n  const [carrinho, setCarrinho] = useState(() => {\r\n    return JSON.parse(localStorage.getItem('carrinho')) || [];\r\n  });\r\n\r\n  const atualizarCarrinho = (novoCarrinho) => {\r\n    setCarrinho(novoCarrinho);\r\n    localStorage.setItem('carrinho', JSON.stringify(novoCarrinho));\r\n  };\r\n\r\n  const adicionarAoCarrinho = (produto) => {\r\n    if (carrinho.some(item => item.idproduto === produto.idproduto)) {\r\n      alert('Este produto já está no carrinho!');\r\n      return;\r\n    }\r\n\r\n    atualizarCarrinho([...carrinho, produto]);\r\n  };\r\n\r\n  const removerDoCarrinho = (idProduto) => {\r\n    const novoCarrinho = carrinho.filter(produto => produto.idproduto !== idProduto);\r\n    atualizarCarrinho(novoCarrinho);\r\n  };\r\n\r\n  const produtoJaNoCarrinho = (idProduto) => carrinho.some(produto => produto.idproduto === idProduto);\r\n\r\n  const finalizarCompra = () => {\r\n    if (carrinho.length === 0) return alert(\"Seu carrinho está vazio.\");\r\n    if (!carrinho.some(produto => produto.nome && produto.preco)) return alert(\"Não há produtos válidos no carrinho.\");\r\n\r\n    const frete = 10.00;\r\n    let subtotal = 0;\r\n    let mensagem = \"*Resumo do Seu Pedido:*\\n\\n\";\r\n\r\n    carrinho.forEach((produto, index) => {\r\n      if (!produto.nome || produto.preco == null) return;\r\n      const preco = Number(produto.preco || 0).toFixed(2);\r\n      mensagem += `${index + 1}.  *${produto.nome}* - R$${preco}\\n`;\r\n      subtotal += parseFloat(preco);\r\n    });\r\n\r\n    const total = subtotal + frete;\r\n    mensagem += `\\n*Subtotal:* R$${subtotal.toFixed(2)}\\n*Total:* R$${total.toFixed(2)}\\n\\nObrigado por comprar!\\nGostaria de algo mais personalizado?`;\r\n\r\n    window.open(`https://wa.me/5511971195011?text=${encodeURIComponent(mensagem)}`, \"_blank\");\r\n  };\r\n\r\n  return (\r\n    <CarrinhoContext.Provider\r\n      value={{\r\n        carrinho,\r\n        adicionarAoCarrinho,\r\n        removerDoCarrinho,\r\n        produtoJaNoCarrinho,\r\n        finalizarCompra,\r\n      }}\r\n    >\r\n      {children}\r\n    </CarrinhoContext.Provider>\r\n  );\r\n};"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}